const items = [
  {
    stt:1,
    mainImage: "https://res.cloudinary.com/dle5zsta0/image/upload/v1761922342/a9d0d0fc7_0ed1ce8409624a9dabbef47c0e061709tplv-photomode-image_rthvw1.jpg",
    image2: "https://picsum.photos/500/700?random=2",
    image3: "https://picsum.photos/500/700?random=3",
    links: {
      shirt: "https://example.com/shirt1",
      pants: "https://example.com/pants1",
      shoes: "https://example.com/shoes1",
      
    },
  },
  {
    stt:2,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/63bdd2624_SnapVideoapp_403841231_1378074766400277_7050769442776178804_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:3,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/2275f9e0f_store_01JT1DJXNEVNC180TBABKR6K12_assets_1747747694143-downloadgramapp_473147873_939320168339264_2077883674834355533_n.jpg",
    image2: "https://picsum.photos/500/700?random=12",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:4,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/dc5ce9daf_store_01JT1DJXNEVNC180TBABKR6K12_assets_1750496558802-downloadgramapp_508516415_18396601819113964_7508385680717588610_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:5,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/f2087a670_SnapVideoapp_519877809_18091306216729496_6269600926537744857_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:6,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/2ccee61c1_instasavewebsite_472791362_18046466021329399_6985021012732482207_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:7,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/fae9ffbb4_5eb596e84c4541b9bee6dc6eba50fdf2tplv-photomode-image.jpeg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=11",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {

    stt:8,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/b805d642f_instasavewebsite_476449031_18050060441329399_3752136504561629011_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:9,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/87df7bb1b_SnapInstato_535564732_18309320353245706_4570691641238183738_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:10,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/dfc738c0e_store_01JT1DJXNEVNC180TBABKR6K12_assets_1751955059058-2ffb98f8-9f7d-46c6-a53f-4a60e35f75ed.jpeg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:11,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/da5cb01e8_SnapInstato_502482076_18330498520205334_4771130572928359669_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },

  {
    stt:12,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/3313b3a4a_store_01JT1DJXNEVNC180TBABKR6K12_assets_1751955543660-83de3268-29a3-44eb-b4af-4d3068a719f6.jpeg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:13,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/0859780a0_store_01JT1DJXNEVNC180TBABKR6K12_assets_1746291531900-downloadgramapp_434472772_18043529140664545_2167797158188929081_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },

  {
    stt:14,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/16f2209f3_store_01JT1DJXNEVNC180TBABKR6K12_assets_1746149085490-gaininstacom-75.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:15,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/1025307bb_SnapVideoapp_556889530_18147323371411806_145170059006787380_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:16,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/1025307bb_SnapVideoapp_556889530_18147323371411806_145170059006787380_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },

  {
    stt:17,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/9b52a8c7a_store_01JT1DJXNEVNC180TBABKR6K12_assets_1750863557608-downloadgramapp_498693030_18371053972131478_4737300029145737012_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:18,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/1758e267c_store_01JT1DJXNEVNC180TBABKR6K12_assets_1746292855374-downloadgramapp_473753015_18072998701664545_8884873586571696259_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:19,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/ab50b5c6c_SnapVideoapp_543614556_18057521234622660_6747822822384251573_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },{
    stt:20,
    mainImage: "https://base44.app/api/apps/68c5a3b5fcb430d98f9a27f0/files/public/68c5a3b5fcb430d98f9a27f0/ab50b5c6c_SnapVideoapp_543614556_18057521234622660_6747822822384251573_n.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
  {
    stt:21,
    mainImage: "https://res.cloudinary.com/dle5zsta0/image/upload/v1677732763/ECMA_THI/addawyqsmo7ehrysz78a.jpg",
    image2: "https://picsum.photos/500/700?random=4",
    image3: "https://picsum.photos/500/700?random=5",
    links: {
      shirt: "https://example.com/shirt2",
      pants: "https://example.com/pants2",
      shoes: "https://example.com/shoes2",
    },
  },
];
localStorage.setItem('items', JSON.stringify(items));
const featuredGrid = document.getElementById('featuredGrid');
const masonryGrid  = document.getElementById('imageGrid');
function createCard(item) {
  const link = document.createElement('a');
  link.href = `product.html?id=${item.stt}`;  
  link.className = 'group relative block w-full h-full overflow-hidden rounded-xl shadow-lg bg-white';

  const img1 = document.createElement('img');
  img1.src = item.mainImage;
  img1.alt = `Sản phẩm ${item.stt}`;
  img1.className = 'w-full h-full object-cover transition-transform duration-500 ease-out group-hover:scale-110';

  const img2 = document.createElement('img');
  img2.src = item.image2;
  img2.alt = `Sản phẩm ${item.stt}`;
  img2.className = 'absolute inset-0 w-full h-full object-cover opacity-0 transition-all duration-500 ease-out group-hover:opacity-100 group-hover:scale-110';

  link.appendChild(img1);
  link.appendChild(img2);
  return link;
}




function shuffleArray(arr){
  return arr
    .map(v => ({ v, r: Math.random() }))
    .sort((a,b) => a.r - b.r)
    .map(o => o.v);
}

function renderFeatured(firstN){
  const cells = featuredGrid.querySelectorAll('.cell');
  cells.forEach((cell, i) => {
    cell.innerHTML = '';
    if (!firstN[i]) return;
    const card = createCard(firstN[i]);
    card.classList.add('h-full');   // card fill cell
    cell.appendChild(card);
  });
}

function renderMasonry(rest){
  masonryGrid.innerHTML = '';
  const shuffled = shuffleArray(rest);
  shuffled.forEach(item => {
    const wrap = document.createElement('div');
    wrap.appendChild(createCard(item));
    masonryGrid.appendChild(wrap);
  });
}

/* ---------- RENDER TẤT CẢ ---------- */
function rerenderAll() {
  const shuffledAll = shuffleArray(items.slice());   // xáo toàn bộ
  const featured = shuffledAll.slice(0, 7);          // 7 ảnh cho layout mới
  const rest     = shuffledAll.slice(7);             // còn lại

  renderFeatured(featured);
  renderMasonry(rest);
}

rerenderAll();

document.getElementById('reloadBtn').addEventListener('click', rerenderAll);

/* Popup thông báo */
document.getElementById("notificationIcon").addEventListener("click", function () {
  const popup = document.getElementById("notificationPopup");
  popup.classList.toggle("show");
  setTimeout(() => popup.classList.remove("show"), 100000);
});

document.addEventListener("DOMContentLoaded", () => {
  const text = "he.outfit";
  const title = document.getElementById("ledTitle");
  let i = 0;
  let deleting = false;

  function typeEffect() {
    title.innerHTML = ""; 
    const spanContainer = document.createElement("span");
    title.appendChild(spanContainer);

    function animate() {
      if (!deleting && i < text.length) {
        const span = document.createElement("span");
        span.textContent = text.charAt(i);
        span.style.opacity = "0";
        span.style.transition = "opacity 0.1s";
        spanContainer.appendChild(span);

        setTimeout(() => {
          span.style.opacity = "1";
          span.style.textShadow = "0 0 8px #392d27, 0 0 16px #392d27";
        }, 50);
        i++;
        setTimeout(animate, 120);
      }
      // Xóa từng ký tự
      else if (deleting && i > 0) {
        spanContainer.removeChild(spanContainer.lastChild);
        i--;
        setTimeout(animate, 80);
      }
      // Chuyển trạng thái
      else if (!deleting && i === text.length) {
        deleting = true;
        setTimeout(animate,2500); 
      } else if (deleting && i === 0) {
        deleting = false;
        setTimeout(animate, 500); 
      }
    }

    animate();
  }

  typeEffect();

  // nhấp nháy LED cursor
  const cursor = document.createElement("span");
  cursor.textContent = "█";
  cursor.style.marginLeft = "4px";
  cursor.style.animation = "blink 0.8s infinite";
  title.appendChild(cursor);

  const style = document.createElement("style");
  style.textContent = `
  @keyframes blink {
    50% { opacity: 0; }
  }`;
  document.head.appendChild(style);
});

